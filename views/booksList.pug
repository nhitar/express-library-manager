html
    head
        meta(charset="utf-8")
        title –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–Ω–∏–≥–∏
        link(rel="stylesheet" href="/css/styles.css")
    body 
        form(action="/books" method="GET")
            select(name="status")
                option(value="") –í—Å–µ –∫–Ω–∏–≥–∏
                option(value="available") –í –Ω–∞–ª–∏—á–∏–∏
                option(value="borrowed") –í—ã–¥–∞–Ω—ã
            input(type="date" name="returnDate")
            button(type="submit") –ü—Ä–∏–º–µ–Ω–∏—Ç—å
            a(href="/books") –°–±—Ä–æ—Å–∏—Ç—å

        h1(style="color: #333; font-size: 24px; border-bottom: 2px solid #007bff; padding-bottom: 10px;") –°–ø–∏—Å–æ–∫ –∫–Ω–∏–≥

        each book in books 
            .book-card
                h1(style="color: #007bff; font-size: 20px; margin-bottom: 15px;") #{book.title}
                h1 –ê–≤—Ç–æ—Ä: #{book.author}
                h1 –ñ–∞–Ω—Ä: #{book.genre}
                h1 –ì–æ–¥ –≤—ã–ø—É—Å–∫–∞: #{book.releaseDate}

                if book.isAvailable 
                    h1.available ‚úì –í –Ω–∞–ª–∏—á–∏–∏
                else 
                    h1.borrowed ‚úó –í—ã–¥–∞–Ω–∞: #{book.borrowedBy}
                    h1 üìÖ –ù—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å: #{book.returnDate}

                .book-actions
                    form(action=`/books/${book.id}?_method=DELETE` method="POST")
                        button(type="submit" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å?')") –£–¥–∞–ª–∏—Ç—å
                    
                    form(action=`/books/${book.id}` method="GET")
                        button(type="submit") –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—á–∫—É

                    if book.isAvailable
                        button(onclick=`openBorrowDialog('${book.id}')`) –í—ã–¥–∞—Ç—å –∫–Ω–∏–≥—É

        dialog#bookDialog
            form#borrowForm(method="POST")
                label –ò–º—è —á–∏—Ç–∞—Ç–µ–ª—è | –î–∞—Ç–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞
                br
                input(type="text" name="readerName" placeholder="–ò–º—è —á–∏—Ç–∞—Ç–µ–ª—è" required) 
                input(type="date" name="returnDate" required)
                br
                button(type="submit") –í—ã–¥–∞—Ç—å
                button(type="button" onclick="bookDialog.close()") –û—Ç–º–µ–Ω–∞

        script.
            function openBorrowDialog(bookId) {
                document.getElementById('borrowForm').action = `/books/${bookId}`;
                bookDialog.showModal();
            }